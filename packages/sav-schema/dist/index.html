<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <script type="text/javascript" src="sav-schema-umd.js"></script>
  <script type="text/javascript">
  {
    let lists = [
      {
        typeName: 'Int',
        createCases: [1, 1.2, 2],
        checkCases: [1, 2],
      },
      {
        typeName: 'String',
        createCases: [1, '1.2', 2],
        checkCases: [1, '1.2', 2],
      }
    ]
    lists.forEach(({typeName, createCases, checkCases}) => {
      console.group(typeName)
      let Item = schema[typeName]
      console.log('create -', JSON.stringify(Item.create()))
      createCases.forEach((val, id) => {
        console.log('create', id, JSON.stringify(Item.create(val)))
      })
      checkCases.forEach((val, id) => {
        console.log('check ', id, JSON.stringify(Item.check(val)))
      })
      console.groupEnd(typeName)
    })
  }
  {
    let lists = [
      {
        caseName: 'Enum-Sex',
        declares: {
          name: 'Sex',
          enums: [
            {key: 'male', value: 1},
            {key: 'female', value: 2}
          ],
          default: 1
        },
        createCases: [3],
        checkCases: [3, 1, 2]
      },
      {
        caseName: 'Struct-Type-Enum',
        declares: {
          props: {
            name: String,
            id: {
              type: Number,
              optional: true
            },
            sex: {
              type: 'Sex',
              required: false
            }
          }
        },
        createCases: [{id: '10'}, {id: '10', name: 1}],
        checkCases: [{name: 'jetiny', id: '10'}]
      },
      {
        caseName: 'Struct-Array',
        declares: {
          props: {
            ids: {
              array: Number
            }
          }
        },
        createCases: [{ids: [1, '2']}],
        checkCases: [{ids: [1, '2']}],
      },
      {
        caseName: 'Struct-Array-Enum',
        declares: {
          props: {
            ids: {
              array: 'Sex'
            }
          }
        },
        createCases: [{ids: [1, '2']}],
        checkCases: [{ids: [1, '2']}]
      },
      {
        caseName: 'Struct-Array-Struct',
        declares: {
          props: {
            ids: {
              array: {
                props: {
                  id: Number
                }
              }
            }
          }
        },
        createCases: [{ids: [{id: 1}, {id: '2'}]}],
        checkCases: [{ids: [{id: 1}, {id: '2'}]}]
      },
      {
        caseName: 'Array-Basic',
        declares: {
          array: Number
        },
        createCases: [[1], ['10']],
        checkCases: [[1, '10']]
      },
      {
        caseName: 'Array-Struct',
        declares: {
          array: {
            props: {
              id: Number
            }
          }
        },
        createCases: [[{id: 1}], [{id: '10'}]],
        checkCases: [[{id: 1}, {id: '10'}]]
      },
      {
        caseName: 'Array-Struct-Ref',
        declares: {
          array: 'User',
          refs: {
            User: {
              props: {
                id: Number
              }
            }
          }
        },
        createCases: [[{id: 1}], [{id: '10'}]],
        checkCases: [[{id: 1}, {id: '10'}]]
      },
      {
        caseName: 'Array-Array-Struct',
        declares: {
          array: {
            array: {
              props: {
                id: Number
              }
            }
          }
        },
        createCases: [[[{id: 1}]], [[{id: '10'}]]],
        checkCases: [[[{id: 1}], [{id: '10'}]]]
      },
      {
        caseName: 'Array-Array-Type',
        declares: {
          array: {
            array: Number
          }
        },
        createCases: [[[1]], [['10']]],
        checkCases: [[[1], ['10']]]
      },
      {
        caseName: 'Array-Array-Enum',
        declares: {
          array: {
            array: 'Sex'
          }
        },
        createCases: [[[1]], [['2']]],
        checkCases: [[[1], ['2']]]
      },
    ]
    lists.forEach(({caseName, declares, createCases, checkCases}) => {
      console.group(caseName)
      let Item = schema.declare(declares)
      console.log('declare', JSON.stringify(Item.props))
      console.log('create -', JSON.stringify(Item.create()))
      createCases.forEach((val, id) => {
        console.log('create', id, JSON.stringify(Item.create(val)))
      })
      checkCases.forEach((val, id) => {
        console.log('check ', id, JSON.stringify(Item.check(val)))
      })
      console.groupEnd(caseName)
    })
  }
  </script>
  <script type="text/javascript">
    let UserInfo = schema.declare({
      props: {
        age: {
          type: Number,
          checkes: [
            ['re', /\w+/]
          ]
        }
      }
    })
    UserInfo.check({age: 300})
  </script>
</body>
</html>
